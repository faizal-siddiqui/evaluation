import Head from "next/head";
import Image from "next/image";
import { Inter } from "@next/font/google";
import axios from "axios";
import { Box, Flex, Stack } from "@chakra-ui/react";
import Card from "../components/Card";
import Projects from "../components/Projects";
import Language from "../components/Language";
import Education from "../components/Education";
import Navbar from "../components/Navbar";

const userData = {
  login: "faizal-siddiqui",
  id: 112858862,
  node_id: "U_kgDOBroW7g",
  avatar_url: "https://avatars.githubusercontent.com/u/112858862?v=4",
  gravatar_id: "",

  name: "Faizal Siddiqui",
  // "company": null,
  blog: "https://faizal-siddiqui.github.io",
  location: "Kanpur, Uttar Pradesh",
  // "email": null,
  // "hireable": null,
  bio: "A passionate coder learning coding and Data Structure at Masai School.",
  // "twitter_username": null,
  public_repos: 13,
  // "public_gists": 0,
  followers: 101,
  following: 97,
  // "created_at": "2022-09-05T08:55:11Z",
  // "updated_at": "2023-01-03T17:35:19Z"
};

export default function Home({ userData, repos }) {
  console.log("repos:", repos);
  console.log("userData:", userData);
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Navbar userData={userData} />
      <Flex>
        <Box w="30%" m="auto"  mt="20px">
          <Stack spacing={5}> 
            <Card userData={userData} />
            <Language />
            <Education />
          </Stack>
        </Box>
        <Box w="65%" m="auto" mt="20px">
          <Projects projects={repos.items} />
        </Box>
      </Flex>
    </>
  );
}

export const getStaticProps = async () => {
  const data = await axios.get(`https://api.github.com/users/faizal-siddiqui`);
  const repo = await axios.get(
    `https://api.github.com/search/repositories?q=user:faizal-siddiqui+fork:true&sort=updated&per_page=10&type=Repositories`
  );

  return {
    props: {
      userData: data.data,
      repos: repo.data,
    },
  };
};
